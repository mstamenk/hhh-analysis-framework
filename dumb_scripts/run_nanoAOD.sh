
#!/bin/bash

INPUT_2017_c3_0_d4_99="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_0_d4_99_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104203/0000/@"
INPUT_2017_c3_0_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_0_d4_0_TuneCP5_13TeV-amcatnlo-pythia8/@"
INPUT_2017_c3_0_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_0_d4_minus1_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104246/0000/@"
INPUT_2017_c3_19_d4_19="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_19_d4_19_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104333/0000/@"
INPUT_2017_c3_1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_1_d4_0_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104350/0000/@"
INPUT_2017_c3_1_d4_2="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_1_d4_2_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104512/0000/@"
INPUT_2017_c3_2_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_2_d4_minus1_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104721/0000/@"
INPUT_2017_c3_4_d4_9="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_4_d4_9_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104907/0000/@"
INPUT_2017_c3_m1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_minus1_d4_0_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_105048/0000/@"
INPUT_2017_c3_m1_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_minus1_d4_minus1_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_105158/0000/@"
INPUT_2017_c3_m1p5_d4_m0p5="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_minus1p5_d4_minus0p5_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_105354/0000/@"

INPUT_2018_c3_0_d4_99="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_0_d4_99_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL18MiniAODv2-106X_v16-v2/240220_073524/0000/@"
INPUT_2018_c3_0_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_0_d4_0_TuneCP5_13TeV-amcatnlo-pythia8/@"
INPUT_2018_c3_0_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_0_d4_minus1_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL18MiniAODv2-106X_v16-v2/240220_073532/0000/@"
INPUT_2018_c3_19_d4_19="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_19_d4_19_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL18MiniAODv2-106X_v16-v2/240220_073540/0000/@"
INPUT_2018_c3_1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_1_d4_0_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL18MiniAODv2-106X_v16-v2/240220_073549/0000/@"
INPUT_2018_c3_1_d4_2="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_1_d4_2@/@/@/@/@"
INPUT_2018_c3_2_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_2_d4_minus1@/@/@/@/@"
INPUT_2018_c3_4_d4_9="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_4_d4_9@/@/@/@/@"
INPUT_2018_c3_m1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_minus1_d4_0@/@/@/@/@"
INPUT_2018_c3_m1_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_minus1_d4_minus1@/@/@/@/@"
INPUT_2018_c3_m1p5_d4_m0p5="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2018/HHHTo6B_c3_minus1p5_d4_minus0p5@/@/@/@/@"

INPUT_2016_c3_0_d4_99="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_0_d4_99@/@/@/@/@"
INPUT_2016_c3_0_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_0_d4_0@/@"
INPUT_2016_c3_0_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_0_d4_minus1@/@/@/@/@"
INPUT_2016_c3_19_d4_19="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_19_d4_19@/@/@/@/@"
INPUT_2016_c3_1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_1_d4_0@/@/@/@/@"
INPUT_2016_c3_1_d4_2="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_1_d4_2@/@/@/@/@"
INPUT_2016_c3_2_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_2_d4_minus1@/@/@/@/@"
INPUT_2016_c3_4_d4_9="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_4_d4_9@/@/@/@/@"
INPUT_2016_c3_m1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_minus1_d4_0@/@/@/@/@"
INPUT_2016_c3_m1_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_minus1_d4_minus1@/@/@/@/@"
INPUT_2016_c3_m1p5_d4_m0p5="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016/HHHTo6B_c3_minus1p5_d4_minus0p5@/@/@/@/@"

INPUT_2016APV_c3_0_d4_99="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_0_d4_99@/@/@/@/@"
INPUT_2016APV_c3_0_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_0_d4_0@/@"
INPUT_2016APV_c3_0_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_0_d4_minus1@/@/@/@/@"
INPUT_2016APV_c3_19_d4_19="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_19_d4_19@/@/@/@/@"
INPUT_2016APV_c3_1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_1_d4_0@/@/@/@/@"
INPUT_2016APV_c3_1_d4_2="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_1_d4_2@/@/@/@/@"
INPUT_2016APV_c3_2_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_2_d4_minus1@/@/@/@/@"
INPUT_2016APV_c3_4_d4_9="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_4_d4_9@/@/@/@/@"
INPUT_2016APV_c3_m1_d4_0="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_minus1_d4_0@/@/@/@/@"
INPUT_2016APV_c3_m1_d4_m1="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_minus1_d4_minus1@/@/@/@/@"
INPUT_2016APV_c3_m1p5_d4_m0p5="/eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2016APV/HHHTo6B_c3_minus1p5_d4_minus0p5@/@/@/@/@"

OUTPUT_DIR="/eos/user/x/xgeng/workspace/HHH/CMSSW_12_5_2/src/hhh-analysis-framework/output/NanoAOD"
# kappa_strings=("c3_0_d4_99" "c3_0_d4_0" "c3_0_d4_m1" "c3_19_d4_19" "c3_1_d4_0" "c3_1_d4_2" "c3_2_d4_m1" "c3_4_d4_9" "c3_m1_d4_0" "c3_m1_d4_m1" "c3_m1p5_d4_m0p5")
kappa_strings=("c3_2_d4_m1")

# for str in "${kappa_strings[@]}"; do
#     # for year in 2016 2016APV 2017 2018; do
#     for year in 2016 ; do
#         python3 plot_gen_NanoAOD_root.py -s INPUT_${year}_${str} -d $OUTPUT_DIR -t ${str}_${year}

#     done
# done
# #!/bin/bash
# set -x  # 启用调试模式

# OUTPUT_DIR="/eos/user/x/xgeng/workspace/HHH/CMSSW_12_5_2/src/hhh-analysis-framework/output/NanoAOD"
# kappa_strings=("c3_0_d4_99")

for str in "${kappa_strings[@]}"; do
    for year in 2016 2016APV  ; do
        input_var="INPUT_${year}_${str}"
        input_path="${!input_var}"

        echo "Processing $input_path for $str in $year"

        python3 plot_gen_NanoAOD_root.py -s "$input_path" -d "$OUTPUT_DIR" -t "${str}_${year}"
        
        if [ $? -ne 0 ]; then
            echo "Error occurred while processing $input_path"
        else
            echo "Completed processing for $input_path"
        fi
    done
done


# OUTPUT_DIR="$INPUT_DIR/merged"
# FINAL_OUTPUT_FILE="$OUTPUT_DIR/nano_merged_final.root"

# # 创建输出目录
# mkdir -p $OUTPUT_DIR

# # 合并文件到四个部分
# hadd -f $OUTPUT_DIR/nano_merged_part1.root $INPUT_DIR/nano_1.root $INPUT_DIR/nano_1-1.root $INPUT_DIR/nano_1-2.root $INPUT_DIR/nano_1-3.root $INPUT_DIR/nano_1-4.root $INPUT_DIR/nano_1-5.root $INPUT_DIR/nano_3.root
# hadd -f $OUTPUT_DIR/nano_merged_part2.root $INPUT_DIR/nano_4.root $INPUT_DIR/nano_5.root $INPUT_DIR/nano_6.root $INPUT_DIR/nano_7.root
# hadd -f $OUTPUT_DIR/nano_merged_part3.root $INPUT_DIR/nano_8.root $INPUT_DIR/nano_10.root $INPUT_DIR/nano_11.root
# hadd -f $OUTPUT_DIR/nano_merged_part4.root $INPUT_DIR/nano_12.root $INPUT_DIR/nano_13.root $INPUT_DIR/nano_14.root $INPUT_DIR/nano_15.root $INPUT_DIR/nano_16.root $INPUT_DIR/nano_17.root

# # 合并四个部分为最终文件
# hadd -f $FINAL_OUTPUT_FILE $OUTPUT_DIR/nano_merged_part1.root $OUTPUT_DIR/nano_merged_part2.root $OUTPUT_DIR/nano_merged_part3.root $OUTPUT_DIR/nano_merged_part4.root

# # 输出合并完成信息
# echo "All files have been successfully merged into $FINAL_OUTPUT_FILE"

# python3 plot_gen_NanoAOD_root.py -s /eos/cms/store/group/phys_higgs/cmshhh/NanoAODv9PNetAK4/output_2017/HHHTo6B_c3_0_d4_99_TuneCP5_13TeV_amcatnlo-pythia8/NanoAODv9_ParticleNetAK4_RunIISummer20UL17MiniAODv2-106X_v9-v2/240220_104203/0000/@ -d /eos/user/x/xgeng/workspace/HHH/CMSSW_12_5_2/src/hhh-analysis-framework/output/NanoAOD -t c3_0_d4_99